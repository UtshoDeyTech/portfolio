---
import Layout from '../layouts/Layout.astro';
import EducationCard from '../components/ui/EducationCard.astro';
import { getVisibleEducation, educationData } from '@/data/education';
import EducationList from '../components/ui/EducationList.astro';

// Centralized: get visible education from data helper (async)
const visibleEducation = await getVisibleEducation();
const page = educationData.page || {};
---

<Layout>
	<!-- Page Header -->
	<section class='mb-12'>
		<div class='flex items-center gap-4 mb-4'>
			<div class='p-3 bg-primary/10 rounded-lg'>
				<svg class='w-8 h-8 text-primary' fill='none' stroke='currentColor' viewBox='0 0 24 24'>
					<path stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M12 14l9-5-9-5-9 5 9 5z'></path>
					<path stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M12 14l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998 12.078 12.078 0 01.665-6.479L12 14z'></path>
					<path stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M12 14l9-5-9-5-9 5 9 5zm0 0l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998 12.078 12.078 0 01.665-6.479L12 14zm-4 6v-7.5l4-2.222'></path>
				</svg>
			</div>
					<div>
						<h1 class='text-4xl font-bold text-base-content'>{page.title ?? 'Education'}</h1>
						<p class='text-base-content/70 mt-2'>{page.subtitle ?? 'My academic journey and qualifications'}</p>
					</div>
		</div>
	</section>

	<!-- Education Timeline -->
	<section class='space-y-8'>
		<EducationList items={visibleEducation} emptyText={page.empty_text} />
	</section>

	<!-- Metadata Info (Optional - for debugging) -->
	<!--
	<section class='mt-12 pt-8 border-t border-base-300'>
		<p class='text-xs text-base-content/40 text-center'>
			Last updated: {new Date(educationData.metadata.updated_at).toLocaleDateString()}
		</p>
	</section>
	-->
</Layout>
