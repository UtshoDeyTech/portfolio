{% extends "admin/change_form.html" %}

{% block submit_buttons_bottom %}
{{ block.super }}

<div style="margin-top: 20px; padding: 20px; background: #f8f9fa; border-radius: 8px; border: 2px solid #e9ecef;">
    <h3 style="margin-top: 0; color: #495057;">üì¶ Backup & Restore</h3>

    <div style="display: flex; gap: 15px; margin-top: 15px; flex-wrap: wrap;">
        <!-- Export Button -->
        <a href="{% url 'admin-portfolio-export' %}"
           style="display: inline-block; padding: 12px 24px; background: #28a745; color: white; text-decoration: none; border-radius: 6px; font-weight: 600; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
            üì• Export All Portfolio Data
        </a>

        <!-- Import Button -->
        <button type="button" onclick="document.getElementById('import-form').style.display='block'; this.style.display='none';"
                style="padding: 12px 24px; background: #007bff; color: white; border: none; border-radius: 6px; font-weight: 600; cursor: pointer; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
            üì§ Import Portfolio Data
        </button>
    </div>

    <!-- Hidden Import Form -->
    <div id="import-form" style="display: none; margin-top: 20px; padding: 20px; background: white; border-radius: 6px; border: 2px solid #ffc107;">
        <h4 style="margin-top: 0; color: #856404;">‚ö†Ô∏è Import Portfolio Data</h4>
        <form method="post" action="{% url 'admin-portfolio-import' %}" enctype="multipart/form-data">
            {% csrf_token %}
            <div style="margin: 15px 0;">
                <label style="display: block; margin-bottom: 8px; font-weight: 600;">Select Backup ZIP File:</label>
                <input type="file" name="backup_file" accept=".zip" required style="padding: 8px; border: 1px solid #ddd; border-radius: 4px; width: 100%; max-width: 400px;">
            </div>

            <div style="margin: 15px 0;">
                <label style="display: flex; align-items: center; gap: 8px;">
                    <input type="checkbox" name="overwrite" value="yes" required>
                    <span style="color: #dc3545; font-weight: 600;">I understand this will OVERWRITE all existing data</span>
                </label>
            </div>

            <div style="margin-top: 20px; display: flex; gap: 10px;">
                <button type="submit" style="padding: 10px 20px; background: #dc3545; color: white; border: none; border-radius: 4px; font-weight: 600; cursor: pointer;">
                    Import Now
                </button>
                <button type="button" onclick="document.getElementById('import-form').style.display='none';"
                        style="padding: 10px 20px; background: #6c757d; color: white; border: none; border-radius: 4px; cursor: pointer;">
                    Cancel
                </button>
            </div>
        </form>
    </div>

    <p style="margin-top: 15px; color: #6c757d; font-size: 13px;">
        üí° <strong>Tip:</strong> Export creates a ZIP with all data (JSON, Markdown blogs, media files). Import restores everything from a ZIP backup.
    </p>
</div>
{% endblock %}
